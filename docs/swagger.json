{
  "openapi" : "3.0.0",
  "info" : {
    "title" : "API Gerenciamento de clientes",
    "description" : "# Introdução\nEsta é uma API criada por [Richard Smarsi](https://www.github.com/smarsi) para gerenciamento de clientes, feita para exemplificar conhecimentos de NodeJs, ExpressJs, MySQL e Swagger. Além disso, também é oportunidade para exibir  conhecimentos como login, armazenamento de senhas, sessões e permissões dentro de sistemas.\n\nO objetivo core desta aplicação é de ser um sistema simples, porém que permita evoluções para ser implementado dentro de um sistema mais complexo futuramente.\n\nNo momento a API está em sua primeira versão. O tipo de autenticação usada é BarearToken implementado com JWT.\n\n\n# Sobre a Documentação\n\nEsta API está documentada seguindo o modelo **Open API**. Toda a documentação foi criada utilizando o **Swagger**. O template utilizado nesta página de documentação é o Redocly, que pode ser encontrado no [Github Redocly](https://www.github.com/Redocly/redoc).\n",
    "contact" : {
      "email" : "ricsmarsi@gmail.com"
    },
    "version" : "v1.0.0",
    "x-logo" : {
      "url" : "https://user-images.githubusercontent.com/38111460/226025407-0d47cacd-cd6f-41b9-83a5-1c96f9547270.png",
      "altText" : "Customers Management Logo"
    }
  },
  "externalDocs" : {
    "description" : "Descubra como criar um repositório do github para seu modelo OpenAPI.",
    "url" : "https://github.com/Rebilly/generator-openapi-repo"
  },
  "servers" : [ {
    "url" : "https://virtserver.swaggerhub.com/RICSMARSI/GerenciamentoDeClientes/v1.0.0",
    "description" : "SwaggerHub"
  }, {
    "url" : "http://localhost:3000/api",
    "description" : "Ambiente de desenvolvimento"
  } ],
  "tags" : [ {
    "name" : "Clientes",
    "description" : "Este endpoint diz respeito a todas as operações relacionadas aos clientes do sistema (os clientes são a entidade core da API). Considere os clientes como usuários finais do sistema (que apenas teriam direito de de cadastrar e consultar outras informações não sensíveis no so sistema, como produtos por exemplo).\n"
  }, {
    "name" : "Endereços",
    "description" : "Tudo sobre endereços de clientes"
  }, {
    "name" : "Cliente_Model",
    "description" : "<SchemaDefinition schemaRef=\"#/components/schemas/Cliente_GET\" />\n",
    "x-displayName" : "Clientes Model"
  }, {
    "name" : "Endereco_Model",
    "description" : "<SchemaDefinition schemaRef=\"#/components/schemas/Endereco_GET\"/>\n",
    "x-displayName" : "Endereço Model"
  } ],
  "paths" : {
    "/cliente" : {
      "get" : {
        "tags" : [ "Clientes" ],
        "summary" : "Listagem de clientes",
        "description" : "Essa rota será responsável por listar todos os clientes cadastrados no sistema",
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "array",
                  "items" : {
                    "$ref" : "#/components/schemas/inline_response_200"
                  }
                }
              }
            }
          }
        }
      },
      "post" : {
        "tags" : [ "Clientes" ],
        "summary" : "Cadastro de clientes",
        "description" : "Essa rota será responsável por cadastrar clientes no sistema",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/Cliente_POST"
              },
              "examples" : {
                "cliente" : {
                  "value" : {
                    "nome" : "Hebert Richards",
                    "email" : "heds@email.com",
                    "senha" : "umasenhapersonalizada",
                    "confirmasenha" : "umasenhapersonalizada",
                    "cpf" : "482.905.810-25",
                    "endereco" : {
                      "titulo_endereco" : "Meu Rancho",
                      "cep" : "12345678",
                      "logradouro" : "Rua Inventada",
                      "numero" : "4845",
                      "complemento" : "",
                      "bairro" : "Centro",
                      "cidade" : "Ponte Branca",
                      "estado" : "MT"
                    }
                  }
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_200_1"
                }
              }
            }
          },
          "400" : {
            "description" : "Campos ou valores incorretos",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "erro campo senha" : {
                    "value" : {
                      "mensagem" : "O campo 'senha' deve ser passado"
                    }
                  },
                  "erro valor nome" : {
                    "value" : {
                      "mensagem" : "O campo 'nome' não deve ser vazio"
                    }
                  }
                }
              }
            }
          },
          "401" : {
            "description" : "A senha e confirmação de senha não conferem",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "erro confirmacao senha" : {
                    "value" : {
                      "mensagem" : "A senha e confirmação de senha não conferem"
                    }
                  }
                }
              }
            }
          },
          "403" : {
            "description" : "CPF ou Email já registrados no sistema",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "cpf existente" : {
                    "value" : {
                      "mensagem" : "ERRO - CPF já registrado"
                    }
                  },
                  "email existente" : {
                    "value" : {
                      "mensagem" : "ERRO - EMAIL já registrado"
                    }
                  }
                }
              }
            }
          },
          "422" : {
            "description" : "CPF Inválido",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "cpf invalido" : {
                    "value" : {
                      "mensagem" : "CPF Inválido"
                    }
                  }
                }
              }
            }
          },
          "500" : {
            "description" : "Erro interno",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "erro interno" : {
                    "value" : {
                      "mensagem" : "Erro interno. Tente novamente mais tarde."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/cliente/{id_cliente}" : {
      "get" : {
        "tags" : [ "Clientes" ],
        "summary" : "Pega informações de um cliente específico recebendo o Id",
        "description" : "Pega cliente pelo Id",
        "parameters" : [ {
          "name" : "id_cliente",
          "in" : "path",
          "description" : "Id de um cliente",
          "required" : true,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "type" : "integer"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "array",
                  "items" : {
                    "$ref" : "#/components/schemas/inline_response_200_2"
                  }
                }
              }
            }
          }
        }
      },
      "put" : {
        "tags" : [ "Clientes" ],
        "summary" : "Altera informações de um cliente específico recebendo o Id",
        "description" : "Altera informações de um cliente pelo Id",
        "parameters" : [ {
          "name" : "id_cliente",
          "in" : "path",
          "description" : "Id de um cliente",
          "required" : true,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "type" : "integer"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK - Sucesso",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "sucesso" : {
                    "value" : {
                      "mensagem" : "Cliente com id x atualizado com sucesso."
                    }
                  }
                }
              }
            }
          },
          "400" : {
            "description" : "Email já registrado",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Mensagem"
                },
                "examples" : {
                  "erro" : {
                    "value" : {
                      "mensagem" : "ERRO - Este email já registrado por outro usuário no sistema."
                    }
                  }
                }
              }
            }
          },
          "404" : {
            "description" : "Id incorreto",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Mensagem"
                },
                "examples" : {
                  "erro" : {
                    "value" : {
                      "mensagem" : "ERRO - Não existe um cliente com este ID (x) cadastrado no sistema."
                    }
                  }
                }
              }
            }
          },
          "409" : {
            "description" : "Erro de campos incorretos",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Mensagem"
                },
                "examples" : {
                  "erro campo" : {
                    "value" : {
                      "mensagem" : "O campo 'x' deve ser passado."
                    }
                  },
                  "erro valor" : {
                    "value" : {
                      "mensagem" : "O valor do campo 'x' não pode ser vazio!"
                    }
                  }
                }
              }
            }
          },
          "500" : {
            "description" : "Erro interno",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Mensagem"
                },
                "examples" : {
                  "erro interno" : {
                    "value" : {
                      "mensagem" : "Erro interno. Tente novamente mais tarde."
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "Clientes" ],
        "summary" : "Deleta as informações de um cliente específico recebendo o Id",
        "description" : "Deleta informações de um cliente pelo Id",
        "parameters" : [ {
          "name" : "id_cliente",
          "in" : "path",
          "description" : "Id de um cliente",
          "required" : true,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "type" : "integer"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK - Sucesso"
          },
          "404" : {
            "description" : "Id incorreto",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Mensagem"
                },
                "examples" : {
                  "erro" : {
                    "value" : {
                      "mensagem" : "ERRO - Não existe um cliente com este ID (x) cadastrado no sistema."
                    }
                  }
                }
              }
            }
          },
          "500" : {
            "description" : "Erro interno",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Mensagem"
                },
                "examples" : {
                  "erro interno" : {
                    "value" : {
                      "mensagem" : "Erro interno. Tente novamente mais tarde."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/cliente/{id_cliente}/endereco" : {
      "get" : {
        "tags" : [ "Endereços" ],
        "summary" : "Pega o endereço de um cliente em específico recebendo o Id",
        "description" : "Pega o endereço de um cliente pelo Id",
        "parameters" : [ {
          "name" : "id_cliente",
          "in" : "path",
          "description" : "Id de um cliente",
          "required" : true,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "type" : "integer"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Endereco_GET"
                }
              }
            }
          },
          "404" : {
            "description" : "Id incorreto",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Mensagem"
                },
                "examples" : {
                  "erro" : {
                    "value" : {
                      "mensagem" : "ERRO - Não existe um cliente com este ID (x) cadastrado no sistema."
                    }
                  }
                }
              }
            }
          },
          "409" : {
            "description" : "Sem endereço",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Mensagem"
                },
                "examples" : {
                  "erro" : {
                    "value" : {
                      "mensagem" : "ERRO - O cliente não contém nenhum endereço cadastrado"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post" : {
        "tags" : [ "Endereços" ],
        "summary" : "Cadastro de endereço para um cliente",
        "description" : "Essa rota será responsável por cadastrar um novo endereço para um cliente recebendo seu Id",
        "parameters" : [ {
          "name" : "id_cliente",
          "in" : "path",
          "description" : "Id de um cliente",
          "required" : true,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "type" : "integer"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/Endereco_POST"
              },
              "examples" : {
                "cliente" : {
                  "value" : {
                    "titulo_endereco" : "Trabalho",
                    "cep" : "03478423",
                    "logradouro" : "Av Express",
                    "numero" : "385",
                    "complemento" : "",
                    "bairro" : "Centro",
                    "cidade" : "Rio de Janeiro",
                    "estado" : "RJ"
                  }
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Endereco_GET"
                }
              }
            }
          },
          "400" : {
            "description" : "Campos ou valores incorretos",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "erro campo" : {
                    "value" : {
                      "mensagem" : "O campo 'logradouro' do endereco deve ser passado"
                    }
                  },
                  "erro valor" : {
                    "value" : {
                      "mensagem" : "O campo 'numero' não deve ser vazio"
                    }
                  }
                }
              }
            }
          },
          "401" : {
            "description" : "Sem Body",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "body error" : {
                    "value" : {
                      "mensagem" : "ERRO - Um 'body' deve ser passado para esta requisição."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/endereco/{id_endereco}" : {
      "put" : {
        "tags" : [ "Endereços" ],
        "summary" : "Altera informações de um endereço específico recebendo o Id",
        "description" : "Altera informações de um endereço pelo Id",
        "parameters" : [ {
          "name" : "id_endereco",
          "in" : "path",
          "description" : "Id de um endereço",
          "required" : true,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "type" : "integer"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/Endereco_PUT"
              },
              "examples" : {
                "cliente" : {
                  "value" : {
                    "titulo_endereco" : "Trabalho",
                    "numero" : "1456",
                    "complemento" : "Escritório 98"
                  }
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK - Sucesso",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Endereco_GET"
                }
              }
            }
          },
          "400" : {
            "description" : "Campos ou valores incorretos",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "erro campo" : {
                    "value" : {
                      "mensagem" : "O campo 'logradouro' do endereco deve ser passado"
                    }
                  },
                  "erro valor" : {
                    "value" : {
                      "mensagem" : "O campo 'numero' não deve ser vazio"
                    }
                  }
                }
              }
            }
          },
          "401" : {
            "description" : "Sem Body",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/inline_response_400"
                },
                "examples" : {
                  "body error" : {
                    "value" : {
                      "mensagem" : "ERRO - Um 'body' deve ser passado para esta requisição."
                    }
                  }
                }
              }
            }
          },
          "404" : {
            "description" : "Id incorreto",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Mensagem"
                },
                "examples" : {
                  "erro" : {
                    "value" : {
                      "mensagem" : "ERRO - Não existe um endereço com o id passado (x)"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "Endereços" ],
        "summary" : "Deleta as informações de um endereço específico recebendo o Id",
        "description" : "Deleta informações de um endereço pelo Id",
        "parameters" : [ {
          "name" : "id_endereco",
          "in" : "path",
          "description" : "Id de um endereço",
          "required" : true,
          "style" : "simple",
          "explode" : false,
          "schema" : {
            "type" : "integer"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK - Sucesso"
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "Cliente_GET" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "number"
          },
          "nome" : {
            "type" : "string"
          },
          "cpf" : {
            "type" : "string",
            "description" : "Pode ser passado com ou sem os caracteres especiais (' . ' e ' - ')"
          },
          "email" : {
            "type" : "string"
          },
          "senha" : {
            "type" : "string"
          },
          "confirmasenha" : {
            "type" : "string"
          },
          "updatedAt" : {
            "type" : "string"
          },
          "createdAt" : {
            "type" : "string"
          }
        }
      },
      "Cliente_POST" : {
        "required" : [ "confirmasenha", "cpf", "email", "endereco", "nome", "senha" ],
        "type" : "object",
        "properties" : {
          "nome" : {
            "type" : "string"
          },
          "cpf" : {
            "type" : "string",
            "description" : "Pode ser passado com ou sem os caracteres especiais (' . ' e ' - ')"
          },
          "email" : {
            "type" : "string"
          },
          "senha" : {
            "type" : "string"
          },
          "confirmasenha" : {
            "type" : "string"
          },
          "endereco" : {
            "$ref" : "#/components/schemas/Cliente_POST_endereco"
          }
        }
      },
      "Endereco_GET" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "number"
          },
          "titulo_endereco" : {
            "type" : "string"
          },
          "cep" : {
            "type" : "string"
          },
          "logradouro" : {
            "type" : "string"
          },
          "numero" : {
            "type" : "number"
          },
          "complemento" : {
            "type" : "string"
          },
          "bairro" : {
            "type" : "string"
          },
          "cidade" : {
            "type" : "string"
          },
          "estado" : {
            "type" : "string"
          },
          "cliente_id" : {
            "type" : "number"
          },
          "updatedAt" : {
            "type" : "string"
          },
          "createdAt" : {
            "type" : "string"
          }
        }
      },
      "Endereco_POST" : {
        "required" : [ "bairro", "cep", "cidade", "estado", "logradouro", "numero", "titulo_endereco" ],
        "type" : "object",
        "properties" : {
          "titulo_endereco" : {
            "type" : "string"
          },
          "cep" : {
            "type" : "string"
          },
          "logradouro" : {
            "type" : "string"
          },
          "numero" : {
            "type" : "number"
          },
          "complemento" : {
            "type" : "string"
          },
          "bairro" : {
            "type" : "string"
          },
          "cidade" : {
            "type" : "string"
          },
          "estado" : {
            "type" : "string"
          }
        }
      },
      "Endereco_PUT" : {
        "required" : [ "complemento", "numero", "titulo_endereco" ],
        "type" : "object",
        "properties" : {
          "titulo_endereco" : {
            "type" : "string"
          },
          "numero" : {
            "type" : "number"
          },
          "complemento" : {
            "type" : "string"
          }
        }
      },
      "Mensagem" : {
        "type" : "object",
        "properties" : {
          "mensagem" : {
            "type" : "string"
          }
        }
      },
      "Cliente_POST_endereco" : {
        "required" : [ "bairro", "cep", "cidade", "estado", "logradouro", "numero", "titulo_endereco" ],
        "type" : "object",
        "properties" : {
          "titulo_endereco" : {
            "type" : "string"
          },
          "cep" : {
            "type" : "string"
          },
          "logradouro" : {
            "type" : "string"
          },
          "numero" : {
            "type" : "number"
          },
          "complemento" : {
            "type" : "string"
          },
          "bairro" : {
            "type" : "string"
          },
          "cidade" : {
            "type" : "string"
          },
          "estado" : {
            "type" : "string"
          }
        }
      },
      "inline_response_200" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "number"
          },
          "nome" : {
            "type" : "string"
          },
          "email" : {
            "type" : "string"
          }
        }
      },
      "inline_response_200_1" : {
        "type" : "object",
        "properties" : {
          "cliente" : {
            "$ref" : "#/components/schemas/Cliente_GET"
          },
          "endereco" : {
            "$ref" : "#/components/schemas/Endereco_GET"
          }
        }
      },
      "inline_response_400" : {
        "type" : "object",
        "properties" : {
          "mensagem" : {
            "type" : "string"
          }
        }
      },
      "inline_response_200_2" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "number"
          },
          "nome" : {
            "type" : "string"
          },
          "cpf" : {
            "type" : "string"
          },
          "email" : {
            "type" : "string"
          },
          "senha" : {
            "type" : "string"
          },
          "createdAt" : {
            "type" : "string"
          },
          "updatedAt" : {
            "type" : "string"
          }
        }
      }
    }
  },
  "x-tagGroups" : [ {
    "name" : "General",
    "tags" : [ "Clientes", "Endereços" ]
  }, {
    "name" : "Models",
    "tags" : [ "Cliente_Model", "Endereco_Model" ]
  } ]
}